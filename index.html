<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TON Yield Explorer</title>
    <style>
        /* --- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ü–≤–µ—Ç–æ–≤ TON (–ø—Ä–∏–º–µ—Ä) --- */
        :root {
            --ton-blue: #0098EA;
            --ton-dark-blue: #0077C2;
            --ton-light-blue: #E1F5FE;
            --ton-white: #FFFFFF;
            --ton-black: #212121;
            --ton-grey: #757575;
            --ton-light-grey: #F5F5F5;
            --ton-gradient: linear-gradient(45deg, #0077C2, #0098EA); /* –ü—Ä–∏–º–µ—Ä –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ */
            --ton-gradient-hover: linear-gradient(45deg, #0098EA, #0077C2); /* –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
            --status-connected: #4CAF50; /* –ó–µ–ª–µ–Ω—ã–π –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ "–ü–æ–¥–∫–ª—é—á–µ–Ω" */
            --status-disconnected: #F44336; /* –ö—Ä–∞—Å–Ω—ã–π –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ "–û—Ç–∫–ª—é—á–µ–Ω" */
        }

        /* --- –û–±—â–∏–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Ñ–æ–Ω–∞ –∏ —Ç–µ–∫—Å—Ç–∞ --- */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            margin: 0;
            padding: 20px;
            background: var(--ton-light-grey); /* –°–≤–µ—Ç–ª—ã–π —Ñ–æ–Ω */
            color: var(--ton-black); /* –¢–µ–º–Ω—ã–π —Ç–µ–∫—Å—Ç */
            line-height: 1.6;
            display: flex;
            justify-content: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç */
            align-items: flex-start; /* –í—ã—Ä–∞–≤–Ω–∏–≤–∞–µ–º –ø–æ –≤–µ—Ä—Ö—É */
            min-height: 100vh;
            box-sizing: border-box; /* –£—á–∏—Ç—ã–≤–∞–µ–º padding –≤ —Ä–∞–∑–º–µ—Ä–µ */
        }

        .app-container {
            background: var(--ton-white); /* –ë–µ–ª—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
            border-radius: 15px; /* –°–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ —É–≥–ª—ã */
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1); /* –õ–µ–≥–∫–∞—è —Ç–µ–Ω—å */
            max-width: 500px; /* –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —à–∏—Ä–∏–Ω—É –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
            width: 100%;
            text-align: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
            box-sizing: border-box;
        }

        h1, h2 {
            color: var(--ton-dark-blue); /* –ó–∞–≥–æ–ª–æ–≤–∫–∏ —Ü–≤–µ—Ç–æ–º TON */
            margin-bottom: 20px;
        }

        h1 {
            text-align: center;
            color: var(--ton-blue);
            background: -webkit-linear-gradient(45deg, #0077C2, #0098EA); /* –ì—Ä–∞–¥–∏–µ–Ω—Ç –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ */
            -webkit-background-clip: text;
            background-clip: text; /* <-- –î–û–ë–ê–í–¨ –≠–¢–£ –°–¢–†–û–ö–£ */
            -webkit-text-fill-color: transparent;
            margin-bottom: 30px;
            font-size: 2em; /* –£–≤–µ–ª–∏—á–∏–º —Ä–∞–∑–º–µ—Ä –∑–∞–≥–æ–ª–æ–≤–∫–∞ */
        }


        /* --- –°—Ç–∏–ª–∏ —Å–µ–∫—Ü–∏–π --- */
        .section {
            background: var(--ton-light-blue); /* –§–æ–Ω –¥–ª—è —Å–µ–∫—Ü–∏–π */
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: left; /* –¢–µ–∫—Å—Ç –≤–Ω—É—Ç—Ä–∏ —Å–µ–∫—Ü–∏–π —Å–ª–µ–≤–∞ */
            box-sizing: border-box;
        }

        .section h2 {
            margin-top: 0;
            margin-bottom: 15px;
            color: var(--ton-dark-blue);
            border-bottom: 1px solid rgba(0, 120, 190, 0.2); /* –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å */
            padding-bottom: 10px;
            font-size: 1.4em; /* –£–≤–µ–ª–∏—á–∏–º —Ä–∞–∑–º–µ—Ä –ø–æ–¥–∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ */
        }

        /* --- –°—Ç–∏–ª–∏ –∫–Ω–æ–ø–∫–∏ --- */
        .btn {
            display: inline-block;
            background: var(--ton-gradient); /* –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Ñ–æ–Ω –∫–Ω–æ–ø–∫–∏ */
            color: var(--ton-white);
            padding: 12px 25px;
            border: none;
            border-radius: 25px; /* –°–∏–ª—å–Ω–æ–µ —Å–∫—Ä—É–≥–ª–µ–Ω–∏–µ */
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.3s ease, transform 0.1s ease, box-shadow 0.3s ease; /* –ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ */
            box-shadow: 0 5px 15px rgba(0, 152, 234, 0.3); /* –¢–µ–Ω—å –¥–ª—è –∫–Ω–æ–ø–∫–∏ */
            font-weight: bold;
            text-decoration: none; /* –£–±–∏—Ä–∞–µ–º –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ, –µ—Å–ª–∏ –≤–¥—Ä—É–≥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ —Å—Å—ã–ª–∫–∞ */
            text-align: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç –Ω–∞ –∫–Ω–æ–ø–∫–µ */
        }

        .btn:hover {
            background: var(--ton-gradient-hover); /* –ò–∑–º–µ–Ω—è–µ–º –≥—Ä–∞–¥–∏–µ–Ω—Ç –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
            box-shadow: 0 6px 18px rgba(0, 152, 234, 0.4);
        }

        .btn:active {
            transform: scale(0.98); /* –≠—Ñ—Ñ–µ–∫—Ç –Ω–∞–∂–∞—Ç–∏—è */
            box-shadow: 0 2px 10px rgba(0, 152, 234, 0.5);
        }

        /* --- –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏ –∞–¥—Ä–µ—Å–∞ --- */
        .status {
            margin-top: 15px;
            font-weight: bold;
            text-align: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç —Å—Ç–∞—Ç—É—Å–∞ */
        }

        .status.connected {
            color: var(--status-connected); /* –ó–µ–ª–µ–Ω—ã–π —Ü–≤–µ—Ç –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ */
        }

        .status.disconnected {
            color: var(--status-disconnected); /* –ö—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ */
        }


        .address {
            margin-top: 10px;
            word-break: break-all; /* –ü–µ—Ä–µ–Ω–æ—Å –¥–ª–∏–Ω–Ω—ã—Ö –∞–¥—Ä–µ—Å–æ–≤ */
            font-family: monospace; /* –ú–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–π —à—Ä–∏—Ñ—Ç –¥–ª—è –∞–¥—Ä–µ—Å–∞ */
            color: var(--ton-grey);
            font-size: 0.9rem;
            text-align: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –∞–¥—Ä–µ—Å */
        }

        /* --- –°—Ç–∏–ª–∏ –¥–ª—è —Å–∫—Ä—ã—Ç—ã—Ö —Å–µ–∫—Ü–∏–π --- */
        .hidden {
            display: none;
        }

        /* --- –°—Ç–∏–ª–∏ –¥–ª—è –∑–∞–º–µ—Ç–æ–∫ --- */
        .note {
            font-size: 0.85rem;
            color: var(--ton-grey);
            margin-top: 20px;
            text-align: center;
        }

        /* --- –°—Ç–∏–ª–∏ –¥–ª—è —Å–ø–∏—Å–∫–æ–≤ (–±–∞–ª–∞–Ω—Å—ã, –ø—É–ª—ã) --- */
        #balances ul,
        #pools-list ul {
            list-style: none; /* –£–±–∏—Ä–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã —Å–ø–∏—Å–∫–∞ */
            padding: 0;
            margin: 0;
        }

        #balances li,
        #pools-list li {
            background: var(--ton-white); /* –ë–µ–ª—ã–π —Ñ–æ–Ω –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å–ø–∏—Å–∫–∞ */
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border: 1px solid var(--ton-light-grey); /* –õ–µ–≥–∫–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05); /* –õ–µ–≥–∫–∞—è —Ç–µ–Ω—å */
            font-size: 1em;
        }

        #balances li strong,
        #pools-list li strong {
            color: var(--ton-dark-blue); /* –í—ã–¥–µ–ª—è–µ–º –∫–ª—é—á–µ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é */
        }

        #pools-list li small {
            color: var(--ton-grey);
            font-size: 0.85em;
        }

        /* --- –°—Ç–∏–ª–∏ –¥–ª—è –±–ª–æ–∫–∞ –æ—Ü–µ–Ω–∫–∏ –¥–æ—Ö–æ–¥–∞ --- */
        #income-estimate {
             /* –°—é–¥–∞ –±—É–¥–µ–º –¥–æ–±–∞–≤–ª—è—Ç—å —Å—Ç–∏–ª–∏ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ü–µ–Ω–∫–∏ –¥–æ—Ö–æ–¥–∞ */
             font-size: 1.1em;
             font-weight: bold;
             color: var(--ton-dark-blue);
             text-align: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –æ—Ü–µ–Ω–∫—É */
        }

        #income-estimate ul {
             list-style: none;
             padding: 0;
             margin-top: 10px;
        }

        #income-estimate li {
            background: none; /* –£–±–∏—Ä–∞–µ–º —Ñ–æ–Ω —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å–ø–∏—Å–∫–∞ –≤–Ω—É—Ç—Ä–∏ –æ—Ü–µ–Ω–∫–∏ */
            border: none; /* –£–±–∏—Ä–∞–µ–º –≥—Ä–∞–Ω–∏—Ü—É */
            box-shadow: none; /* –£–±–∏—Ä–∞–µ–º —Ç–µ–Ω—å */
            padding: 5px 0;
            margin-bottom: 5px;
            font-weight: normal;
            color: var(--ton-black);
        }

        #income-estimate strong {
            color: var(--status-connected); /* –ó–µ–ª–µ–Ω—ã–π —Ü–≤–µ—Ç –¥–ª—è –∏—Ç–æ–≥–æ–≤–æ–π –æ—Ü–µ–Ω–∫–∏ */
            font-size: 1.2em;
        }

         /* --- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Å—Å—ã–ª–æ–∫ –Ω–∞ –ø—É–ª—ã --- */
        .pool-link {
            color: var(--ton-dark-blue); /* –¶–≤–µ—Ç —Å—Å—ã–ª–∫–∏ */
            text-decoration: none; /* –£–±–∏—Ä–∞–µ–º –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ */
            font-weight: bold;
        }

        .pool-link:hover {
            text-decoration: underline; /* –ü–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
        }


    </style>
    <script src="https://unpkg.com/@tonconnect/sdk@latest/dist/tonconnect-sdk.min.js"></script>
</head>
<body>
    <div class="app-container">
        <h1>üöÄ TON Yield Explorer</h1>

        <div id="connection-section" class="section">
            <h2>–ö–æ—à–µ–ª–µ–∫</h2>
            <button id="connect-button" class="btn">–ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª–µ–∫</button>
            <div id="connection-status" class="status"></div>
            <div id="wallet-address" class="address"></div>
        </div>

        <div id="balance-section" class="section hidden">
            <h2>üí∞ –ú–æ–π –ë–∞–ª–∞–Ω—Å</h2>
            <div id="balances">
                </div>
        </div>

        <div id="pools-section" class="section hidden">
            <h2>üíπ –í—ã–≥–æ–¥–Ω—ã–µ –ü—É–ª—ã (–¢–µ–∫—É—â–∏–µ –æ—Ü–µ–Ω–∫–∏)</h2>
            <div id="pools-list">
                <p>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ –ø—É–ª–∞—Ö...</p>
            </div>
        </div>

        <div id="estimate-section" class="section hidden">
            <h2>üìà –ü—Ä–∏–º–µ—Ä–Ω—ã–π –î–æ—Ö–æ–¥ (15 –¥–Ω–µ–π)</h2>
            <div id="income-estimate">
                 </div>
             <p class="note">* –†–∞—Å—á–µ—Ç –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω—ã–π, –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ —Ç–µ–∫—É—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö APY –∏ –≤–∞—à–µ–º –±–∞–ª–∞–Ω—Å–µ. –ù–µ —è–≤–ª—è–µ—Ç—Å—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–µ–π.</p>
        </div>

    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä —Å —Ç–µ—Å—Ç–æ–≤—ã–º –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–º
        // !!! –í–ù–ò–ú–ê–ù–ò–ï: –î–ª—è –∫–æ–Ω–∫—É—Ä—Å–∞ —Ç–µ–±–µ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è —Å–≤–æ–π manifest.json, —Ä–∞–∑–º–µ—â–µ–Ω–Ω—ã–π –æ–Ω–ª–∞–π–Ω
        // –∏ URL –∫ –Ω–µ–º—É –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —É–∫–∞–∑–∞—Ç—å –∑–¥–µ—Å—å –≤–º–µ—Å—Ç–æ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ!
        const connector = new TonConnectSDK.TonConnect({
            manifestUrl: 'https://raw.githubusercontent.com/ton-community/tonconnect-manifests/main/manifests/tonconnect-manifest.json',
        });

        const connectButton = document.getElementById('connect-button');
        const connectionStatus = document.getElementById('connection-status');
        const walletAddress = document.getElementById('wallet-address');
        const balanceSection = document.getElementById('balance-section');
        const poolsSection = document.getElementById('pools-section');
        const estimateSection = document.getElementById('estimate-section');

        // --- –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –±–∞–ª–∞–Ω—Å–æ–≤ (–ù–£–ñ–ù–û –î–û–†–ê–ë–û–¢–ê–¢–¨!) ---
        // –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ –∑–∞–≥–ª—É—à–∫–∞ —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.
        // –†–µ–∞–ª—å–Ω–æ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –±–∞–ª–∞–Ω—Å—ã –∏–∑ loadBalances –∏ —Ö—Ä–∞–Ω–∏—Ç—å –∏—Ö –∑–¥–µ—Å—å.
        let userBalances = {}; // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –±–∞–ª–∞–Ω—Å–æ–≤

        function getLoadedBalances() {
            return userBalances; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–µ–∫—É—â–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –±–∞–ª–∞–Ω—Å—ã
        }


        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
        function updateUI() {
            if (connector.connected) {
                // –ö–æ—à–µ–ª–µ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω
                connectionStatus.innerText = '–°—Ç–∞—Ç—É—Å: –ü–æ–¥–∫–ª—é—á–µ–Ω';
                connectionStatus.classList.remove('disconnected');
                connectionStatus.classList.add('connected');

                // –ê–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞ (–±–µ—Ä–µ–º –∏–∑ –æ–±—ä–µ–∫—Ç–∞ connector)
                // TON –∞–¥—Ä–µ—Å–∞ –±—ã–≤–∞—é—Ç –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö, –±–µ—Ä–µ–º –±–∞–∑–æ–≤—ã–π (raw) –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
                 const rawAddress = connector.wallet.account.address;
                walletAddress.innerText = `–ê–¥—Ä–µ—Å: ${rawAddress}`;


                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–µ–∫—Ü–∏–∏ –±–∞–ª–∞–Ω—Å–∞, –ø—É–ª–æ–≤ –∏ –æ—Ü–µ–Ω–∫–∏
                balanceSection.classList.remove('hidden');
                poolsSection.classList.remove('hidden');
                estimateSection.classList.remove('hidden');

                // –í—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
                loadBalances(rawAddress); // –ó–∞–≥—Ä—É–∂–∞–µ–º –±–∞–ª–∞–Ω—Å—ã –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞
                loadPoolsData(); // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –æ –ø—É–ª–∞—Ö (–æ–Ω–∏ –º–æ–≥—É—Ç –±—ã—Ç—å —Å—Ç–∞—Ç–∏—á–Ω—ã–º–∏ –∏–ª–∏ —Å –±—ç–∫–µ–Ω–¥–∞)


            } else {
                // –ö–æ—à–µ–ª–µ–∫ –æ—Ç–∫–ª—é—á–µ–Ω
                connectionStatus.innerText = '–°—Ç–∞—Ç—É—Å: –û—Ç–∫–ª—é—á–µ–Ω';
                connectionStatus.classList.remove('connected');
                connectionStatus.classList.add('disconnected');

                walletAddress.innerText = '';
                connectButton.innerText = '–ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª–µ–∫';
                connectButton.classList.remove('connected');

                // –°–∫—Ä—ã–≤–∞–µ–º —Å–µ–∫—Ü–∏–∏ –±–∞–ª–∞–Ω—Å–∞, –ø—É–ª–æ–≤ –∏ –æ—Ü–µ–Ω–∫–∏
                balanceSection.classList.add('hidden');
                poolsSection.classList.add('hidden');
                estimateSection.classList.add('hidden');

                 // –û—á–∏—â–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
                 userBalances = {}; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –±–∞–ª–∞–Ω—Å—ã
                document.getElementById('balances').innerHTML = '';
                document.getElementById('pools-list').innerHTML = '<p>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ –ø—É–ª–∞—Ö...</p>'; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç
                document.getElementById('income-estimate').innerHTML = '';
            }
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏
        connectButton.addEventListener('click', () => {
            if (connector.connected) {
                // –ï—Å–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω, –æ—Ç–∫–ª—é—á–∞–µ–º
                connector.disconnect();
            } else {
                // –ï—Å–ª–∏ –æ—Ç–∫–ª—é—á–µ–Ω, –ø–æ–¥–∫–ª—é—á–∞–µ–º
                connector.connect(); // –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
            }
        });

        // –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ–º—Å—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
        connector.onStatusChange(
            wallet => {
                if (wallet) {
                    console.log('–ö–æ—à–µ–ª–µ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω:', wallet);
                    // console.log('–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–∫–∫–∞—É–Ω—Ç–µ:', wallet.account); // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–∞
                } else {
                    console.log('–ö–æ—à–µ–ª–µ–∫ –æ—Ç–∫–ª—é—á–µ–Ω.');
                }
                updateUI(); // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–∏ –ª—é–±–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞
            },
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ)
            e => {
                console.error('–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:', e);
                connectionStatus.innerText = `–û—à–∏–±–∫–∞: ${e.message}`;
                connectionStatus.classList.remove('connected');
                connectionStatus.classList.add('disconnected'); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É –∫—Ä–∞—Å–Ω—ã–º
                // –ú–æ–∂–µ—à—å –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –∑–¥–µ—Å—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
            }
        );

        // !!! –í–ê–ñ–ù–û: –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏—Ç—É–∞—Ü–∏–∏, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –£–ñ–ï –ø–æ–¥–∫–ª—é—á–µ–Ω –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        // TON Connect SDK –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ, –µ—Å–ª–∏ –æ–Ω–æ –±—ã–ª–æ —Ä–∞–Ω–µ–µ
        connector.restoreConnection();


        // --- –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö (–ù–£–ñ–ù–û –î–û–†–ê–ë–û–¢–ê–¢–¨!) ---

        async function loadBalances(address) {
            console.log(`–ó–∞–≥—Ä—É–∑–∫–∞ –±–∞–ª–∞–Ω—Å–æ–≤ –¥–ª—è –∞–¥—Ä–µ—Å–∞: ${address}`);
            const balancesDiv = document.getElementById('balances');
            balancesDiv.innerHTML = '<p>–ó–∞–≥—Ä—É–∑–∫–∞ –±–∞–ª–∞–Ω—Å–æ–≤...</p>'; // Placeholder

            try {
                // --- –ü—Ä–∏–º–µ—Ä –ø–æ–ª—É—á–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ TON —á–µ—Ä–µ–∑ –ø—É–±–ª–∏—á–Ω—ã–π TON API ---
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—É–±–ª–∏—á–Ω—ã–π API (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç TON Center)
                const tonApiResponse = await fetch(`https://toncenter.com/api/v2/getwalletbalance?address=${address}`);
                const tonApiData = await tonApiResponse.json();

                if (tonApiData.ok) {
                    const balanceNano = tonApiData.result.balance; // –ë–∞–ª–∞–Ω—Å –≤ –Ω–∞–Ω–æ–¢–û–ù–∞—Ö (—Å—Ç—Ä–æ–∫–∞)
                    // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ –¢–û–ù (—á–∏—Å–ª–æ). –ò—Å–ø–æ–ª—å–∑—É–µ–º parseFloat –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã MVP
                    const balanceTon = parseFloat(balanceNano) / 1e9;

                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –±–∞–ª–∞–Ω—Å TON –≤ –Ω–∞—à–µ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
                    userBalances = {}; // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –±–∞–ª–∞–Ω—Å—ã
                    userBalances['TON'] = balanceTon;

                    let balancesHtml = `<ul><li><strong>–ë–∞–ª–∞–Ω—Å TON:</strong> ${balanceTon.toFixed(4)}</li>`;

                    // --- TODO: –ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–æ–≤ Jettons (–¥—Ä—É–≥–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤) ---
                    // –≠—Ç–æ —Å–ª–æ–∂–Ω–µ–µ, —Ç—Ä–µ–±—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ Jetton Wallet –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
                    // –î–ª—è MVP –º–æ–∂–Ω–æ –æ–ø—É—Å—Ç–∏—Ç—å –∏–ª–∏ —Å–¥–µ–ª–∞—Ç—å –∑–∞–≥–ª—É—à–∫—É, –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π API,
                    // –∫–æ—Ç–æ—Ä—ã–π —Å—Ä–∞–∑—É –æ—Ç–¥–∞–µ—Ç –≤—Å–µ –±–∞–ª–∞–Ω—Å—ã (–µ—Å–ª–∏ —Ç–∞–∫–æ–π –µ—Å—Ç—å –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–æ—Å—Ç–æ).
                    // –ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å API –æ—Ç TON API (–Ω–µ –ø—É—Ç–∞—Ç—å —Å TON Center API)
                    // https://tonapi.io/
                    // –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –±–∞–ª–∞–Ω—Å–æ–≤ Jettons –∏ TON:
                    // https://tonapi.io/v2/accounts/<–∞–¥—Ä–µ—Å_–∫–æ—à–µ–ª—å–∫–∞>/jettons
                    // https://tonapi.io/v2/accounts/<–∞–¥—Ä–µ—Å_–∫–æ—à–µ–ª—å–∫–∞>/balances
                    // –ù—É–∂–Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ API –∫–ª—é—á –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã.

                     // –ü–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ —Å—Ç–∞—Ç–∏—á–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ü–µ–Ω–∫–∏
                     // –í —Ä–µ–∞–ª—å–Ω–æ–º –∫–æ–¥–µ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∞—Ç—å —Å –±–ª–æ–∫—á–µ–π–Ω–∞/API
                     // userBalances['USDT'] = 500.75; // –¢–µ—Å—Ç–æ–≤—ã–π –±–∞–ª–∞–Ω—Å USDT
                     // userBalances['EXAMPLE'] = 1234; // –¢–µ—Å—Ç–æ–≤—ã–π –±–∞–ª–∞–Ω—Å –¥—Ä—É–≥–æ–≥–æ —Ç–æ–∫–µ–Ω–∞

                    // --- –ü—Ä–∏–º–µ—Ä –∫–∞–∫ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∞—Ç—å –±–∞–ª–∞–Ω—Å—ã Jettons —á–µ—Ä–µ–∑ TONAPI (–Ω—É–∂–Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–∫–∞ –∏ –∫–ª—é—á!) ---
                    /*
                    const tonapiResponse = await fetch(`https://tonapi.io/v2/accounts/${address}/balances`);
                    const tonapiData = await tonapiResponse.json();
                    if (tonapiResponse.ok) {
                         // –¢—É—Ç –ø–∞—Ä—Å–∏–º –æ—Ç–≤–µ—Ç –∏ –¥–æ–±–∞–≤–ª—è–µ–º Jettons –≤ userBalances
                         // –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –æ—Ç–≤–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ { balances: [{ token: { symbol: 'USDT' }, balance: '...' }] }
                         tonapiData.balances.forEach(item => {
                             // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –±–∞–ª–∞–Ω—Å –∏–∑ —Å—Ç—Ä–æ–∫–∏ —Å –Ω–∞–Ω–æ–µ–¥–∏–Ω–∏—Ü–∞–º–∏ –≤ —á–∏—Å–ª–æ
                             const jettonBalance = parseFloat(item.balance) / (10 ** item.token.decimals);
                             userBalances[item.token.symbol] = jettonBalance;
                         });
                    }
                    */


                     // –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –±–∞–ª–∞–Ω—Å–æ–≤ (TON –∏ Jettons), –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º –∏—Ö
                     for (const symbol in userBalances) {
                         if (symbol !== 'TON' && userBalances[symbol] > 0) {
                             // –û–∫—Ä—É–≥–ª—è–µ–º –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∞–∫—Ç–∏–≤–∞
                             const displayBalance = symbol === 'USDT' ? userBalances[symbol].toFixed(2) : userBalances[symbol].toFixed(userBalances[symbol] > 10 ? 0 : 4); // –ü—Ä–∏–º–µ—Ä –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è
                             balancesHtml += `<li><strong>–ë–∞–ª–∞–Ω—Å ${symbol}:</strong> ${displayBalance}</li>`;
                         }
                     }


                    balancesHtml += '</ul>';
                    balancesDiv.innerHTML = balancesHtml;

                    // –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –±–∞–ª–∞–Ω—Å–æ–≤ –≤—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –æ—Ü–µ–Ω–∫–∏ –¥–æ—Ö–æ–¥–∞
                    // –û–Ω–∞ —Å–∞–º–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç, –∑–∞–≥—Ä—É–∂–µ–Ω—ã –ª–∏ –¥–∞–Ω–Ω—ã–µ –ø—É–ª–æ–≤
                    estimateIncome();


                } else {
                    balancesDiv.innerHTML = '<p>–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –±–∞–ª–∞–Ω—Å TON.</p>';
                    // –ü—Ä–æ–±—É–µ–º –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ç–æ–ª—å–∫–æ Jettons, –µ—Å–ª–∏ TON –±–∞–ª–∞–Ω—Å –Ω–µ –ø–æ–ª—É—á–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
                     // TODO: –í—ã–∑–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É Jettons –∑–¥–µ—Å—å, –µ—Å–ª–∏ TON balance fetch failed
                }

            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –±–∞–ª–∞–Ω—Å–æ–≤:', error);
                balancesDiv.innerHTML = '<p>–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –±–∞–ª–∞–Ω—Å–æ–≤.</p>';
            }
        }


        async function loadPoolsData() {
            console.log('–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ –ø—É–ª–∞—Ö...');
            const poolsListDiv = document.getElementById('pools-list');
             poolsListDiv.innerHTML = '<p>–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –ø—É–ª–∞—Ö...</p>'; // Placeholder

            // --- TODO: –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ APY —Å —Ä–µ–∞–ª—å–Ω—ã—Ö DeFi –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ ---
            // –≠—Ç–æ —Å–∞–º–∞—è —Å–ª–æ–∂–Ω–∞—è —á–∞—Å—Ç—å MVP.
            // –í–∞—Ä–∏–∞–Ω—Ç—ã:
            // 1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—É–±–ª–∏—á–Ω–æ–µ API –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ DEX'–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å –∏ –ø—Ä–æ—Å—Ç–æ–µ)
            // 2. –ü–∞—Ä—Å–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Å –∏—Ö —Å–∞–π—Ç–∞ (–º–µ–Ω–µ–µ –Ω–∞–¥–µ–∂–Ω–æ –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–ø—Ä–µ—â–µ–Ω–æ)
            // 3. –ù–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π –±—ç–∫–µ–Ω–¥, –∫–æ—Ç–æ—Ä—ã–π —Å–∞–º —Å–æ–±–∏—Ä–∞–µ—Ç —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –∏ –æ—Ç–¥–∞–µ—Ç –º–∏–Ω–∏-–∞–ø–ø–∫–µ
            // 4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—á–Ω—ã–µ/–≤—Ä–µ–º–µ–Ω–Ω–æ-—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
            // –î–ª—è MVP –∫–æ–Ω–∫—É—Ä—Å–∞, —Å—Ç–∞—Ç–∏—á–Ω—ã–µ –∏–ª–∏ –ø–æ–ª—É—á–∞–µ–º—ã–µ –û–ß–ï–ù–¨ –ø—Ä–æ—Å—Ç—ã–º —Å–ø–æ—Å–æ–±–æ–º –¥–∞–Ω–Ω—ã–µ - –Ω–∞–∏–±–æ–ª–µ–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ.

            try {
                // –ò–º–∏—Ç–∏—Ä—É–µ–º –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö –æ –ø—É–ª–∞—Ö —Å –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
                // –í —Ä–µ–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç await fetch(...) –∫ API –∏–ª–∏ –±—ç–∫–µ–Ω–¥—É
                 await new Promise(resolve => setTimeout(resolve, 1500)); // –ó–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞

                // --- –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ/—Ñ–∏–∫—Ç–∏–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –ø—É–ª–∞—Ö –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ ---
                // –í –†–ï–ê–õ–¨–ù–û–ô –í–ï–†–°–ò–ò –≠–¢–ò –î–ê–ù–ù–´–ï –î–û–õ–ñ–ù–´ –ë–´–¢–¨ –ê–ö–¢–£–ê–õ–¨–ù–´–ú–ò!!!
                const dummyPools = [
                    {
                        id: 'pool1',
                        name: 'TON / USDT (–ü—Ä–∏–º–µ—Ä DEX)',
                        apy: '35.12', // APY –∫–∞–∫ —á–∏—Å–ª–æ (—É–¥–æ–±–Ω–µ–µ –¥–ª—è —Ä–∞—Å—á–µ—Ç–æ–≤)
                        relevantAsset: 'USDT', // –ê–∫—Ç–∏–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —ç—Ç–æ–≥–æ –ø—É–ª–∞ (—Å–∏–º–≤–æ–ª)
                         link: 'https://example.dex.com/pool/TON/USDT' // –ü—Ä–∏–º–µ—Ä —Å—Å—ã–ª–∫–∏ –Ω–∞ –ø—É–ª
                    },
                     {
                         id: 'pool2',
                         name: 'TON / wBTC (–î—Ä—É–≥–æ–π DEX)',
                         apy: '28.55',
                         relevantAsset: 'wBTC',
                          link: 'https://another.dex.com/pool/TON/wBTC'
                     },
                     {
                         id: 'pool3',
                         name: 'TON Staking (–ü—Ä–∏–º–µ—Ä)',
                         apy: '4.5',
                         relevantAsset: 'TON', // –î–ª—è —Å—Ç–µ–π–∫–∏–Ω–≥–∞ TON –Ω—É–∂–µ–Ω —Å–∞–º TON
                          link: 'https://example.staking.com'
                     },
                      {
                         id: 'pool4',
                         name: 'JETTON / TON (–¢–≤–æ–π Jetton?)', // –ü—Ä–∏–º–µ—Ä –ø—É–ª–∞ —Å —Ç–≤–æ–∏–º –∂–µ—Ç–æ–Ω–æ–º
                         apy: '55.99',
                         relevantAsset: 'MYTOKEN', // –£–∫–∞–∂–∏ —Å–∏–º–≤–æ–ª —Å–≤–æ–µ–≥–æ –∂–µ—Ç–æ–Ω–∞
                          link: 'https://example.dex.com/pool/MYTOKEN/TON'
                     },
                ];
                // --- –ö–æ–Ω–µ—Ü —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö ---


                let poolsHtml = '<ul>';
                if (dummyPools.length > 0) {
                    dummyPools.forEach(pool => {
                        poolsHtml += `<li>
                                        <strong>${pool.name}:</strong> ${pool.apy}% APY
                                        <br><small>–ê–∫—Ç–∏–≤ –¥–ª—è –≤–Ω–µ—Å–µ–Ω–∏—è: ${pool.relevantAsset}</small>
                                        ${pool.link ? `<br><a href="${pool.link}" target="_blank" class="pool-link">–ü–µ—Ä–µ–π—Ç–∏</a>` : ''}
                                      </li>`;
                    });
                    poolsHtml += '</ul>';
                    poolsListDiv.innerHTML = poolsHtml;

                     // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø—É–ª–æ–≤ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Ä–∞—Å—á–µ—Ç–µ
                     loadedPoolsData = dummyPools; // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –Ω–æ–≤—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é

                     // –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø—É–ª–æ–≤ –≤—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –æ—Ü–µ–Ω–∫–∏ –¥–æ—Ö–æ–¥–∞
                    estimateIncome();


                } else {
                    poolsListDiv.innerHTML = '<p>–î–∞–Ω–Ω—ã–µ –æ –ø—É–ª–∞—Ö –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã.</p>';
                     loadedPoolsData = []; // –û—á–∏—â–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø—É–ª–æ–≤
                }


            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö –æ –ø—É–ª–æ–≤:', error);
                 poolsListDiv.innerHTML = '<p>–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö –æ –ø—É–ª–æ–≤.</p>';
                 loadedPoolsData = []; // –û—á–∏—â–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø—É–ª–æ–≤ –ø—Ä–∏ –æ—à–∏–±–∫–µ
            }
        }

        // --- –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ –ø—É–ª–∞—Ö ---
        let loadedPoolsData = [];


        // --- –§—É–Ω–∫—Ü–∏—è –æ—Ü–µ–Ω–∫–∏ –ø—Ä–∏–º–µ—Ä–Ω–æ–≥–æ –¥–æ—Ö–æ–¥–∞ (–ù–£–ñ–ù–û –î–û–†–ê–ë–û–¢–ê–¢–¨!) ---
        // –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ userBalances –∏ loadedPoolsData
        function estimateIncome() {
             console.log('–û—Ü–µ–Ω–∫–∞ –ø—Ä–∏–º–µ—Ä–Ω–æ–≥–æ –¥–æ—Ö–æ–¥–∞...');
             const incomeEstimateDiv = document.getElementById('income-estimate');

             // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞
             const balances = getLoadedBalances();
             const pools = loadedPoolsData;

             if (Object.keys(balances).length === 0 || pools.length === 0) {
                 // –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–∫–∞ –Ω–µ—Ç, –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º –∏–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º "–ó–∞–≥—Ä—É–∑–∫–∞..."
                 // incomeEstimateDiv.innerHTML = '<p>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ü–µ–Ω–∫–∏...</p>';
                 return; // –í—ã—Ö–æ–¥–∏–º, –ø–æ–∫–∞ –Ω–µ—Ç –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
             }

             let estimateHtml = '<p>–û—Ü–µ–Ω–∫–∞ –¥–æ—Ö–æ–¥–∞ –ø–æ –≤–∞—à–∏–º –∞–∫—Ç–∏–≤–∞–º:</p><ul>';
             let totalEstimateTon = 0; // –î–ª—è —Å—É–º–º–∞—Ä–Ω–æ–π –æ—Ü–µ–Ω–∫–∏ –≤ TON (–æ—á–µ–Ω—å —É—Å–ª–æ–≤–Ω–æ)

             let hasRelevantAssets = false; // –§–ª–∞–≥, –µ—Å—Ç—å –ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∞–∫—Ç–∏–≤—ã –¥–ª—è –ø–æ–∫–∞–∑–∞–Ω–Ω—ã—Ö –ø—É–ª–æ–≤

             // –ü—Ä–æ—Ö–æ–¥–∏–º –ø–æ –∫–∞–∂–¥–æ–º—É –ø—É–ª—É, –∫–æ—Ç–æ—Ä—ã–π –º—ã –æ—Ç–æ–±—Ä–∞–∑–∏–ª–∏
             pools.forEach(pool => {
                 const relevantAssetSymbol = pool.relevantAsset; // –°–∏–º–≤–æ–ª –∞–∫—Ç–∏–≤–∞ –¥–ª—è —ç—Ç–æ–≥–æ –ø—É–ª–∞ (TON, USDT –∏ —Ç.–¥.)
                 const userBalance = balances[relevantAssetSymbol] || 0; // –ë–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è —ç—Ç–æ–≥–æ –∞–∫—Ç–∏–≤–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å, –∏–Ω–∞—á–µ 0)
                 const apyPercentage = parseFloat(pool.apy); // –ü–æ–ª—É—á–∞–µ–º —á–∏—Å–ª–æ APY (—É–∂–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —á–∏—Å–ª–æ)

                 // –ï—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ –∞–∫—Ç–∏–≤–∞ –∏ APY –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∏ > 0
                 if (userBalance > 0 && !isNaN(apyPercentage) && apyPercentage > 0) {
                      hasRelevantAssets = true; // –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –∞–∫—Ç–∏–≤—ã

                     // –ü—Ä–∏–º–µ—Ä–Ω—ã–π —Ä–∞—Å—á–µ—Ç –¥–æ—Ö–æ–¥–∞ –∑–∞ 15 –¥–Ω–µ–π
                     // –î–æ—Ö–æ–¥ = –ë–∞–ª–∞–Ω—Å * (APY –≤ –¥–æ–ª—è—Ö / 365 –¥–Ω–µ–π * 15 –¥–Ω–µ–π)
                     const estimatedIncomeAmount = userBalance * (apyPercentage / 100) * (15 / 365);

                     // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –æ—Ü–µ–Ω–∫—É –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—É–ª–∞
                     estimateHtml += `<li>–í –ø—É–ª–µ "${pool.name}": <strong>~${estimatedIncomeAmount.toFixed(4)} ${relevantAssetSymbol}</strong> –∑–∞ 15 –¥–Ω–µ–π</li>`;

                     // --- TODO: –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –¥–æ—Ö–æ–¥–∞ –≤ TON –¥–ª—è —Å—É–º–º–∞—Ä–Ω–æ–π –æ—Ü–µ–Ω–∫–∏ ---
                     // –î–ª—è —Å—É–º–º–∞—Ä–Ω–æ–π –æ—Ü–µ–Ω–∫–∏ –≤ TON –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å —Ç–µ–∫—É—â–∏–π –∫—É—Ä—Å –∫–∞–∂–¥–æ–≥–æ –∞–∫—Ç–∏–≤–∞ –∫ TON.
                     // –≠—Ç–æ –¥–æ–±–∞–≤–ª—è–µ—Ç –µ—â–µ –æ–¥–Ω—É —Å–ª–æ–∂–Ω–æ—Å—Ç—å (–Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∞—Ç—å –∫—É—Ä—Å—ã —Å DEX –∏–ª–∏ –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä–æ–≤).
                     // –î–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã MVP, –º–æ–∂–µ–º –ª–∏–±–æ —Å—É–º–º–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ TON, –ª–∏–±–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫—É—Ä—Å, –ª–∏–±–æ –≤–æ–æ–±—â–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ–±—â—É—é —Å—É–º–º—É –≤ TON.
                     // –ü–æ–∫–∞ —Å—É–º–º–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Å–∞–º –∞–∫—Ç–∏–≤ - TON
                     if (relevantAssetSymbol === 'TON') {
                          totalEstimateTon += estimatedIncomeAmount;
                     } else {
                          // –ï—Å–ª–∏ –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–ª—É—á–∏—Ç—å –∫—É—Ä—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ API),
                          // –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å—é–¥–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é:
                          // const tonRate = getTonRate(relevantAssetSymbol); // –ù—É–∂–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫—É—Ä—Å–∞
                          // totalEstimateTon += estimatedIncomeAmount * tonRate;
                     }

                 }
             });

             estimateHtml += '</ul>';

             // –ï—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –∞–∫—Ç–∏–≤–æ–≤ –¥–ª—è –ø–æ–∫–∞–∑–∞–Ω–Ω—ã—Ö –ø—É–ª–æ–≤
              if (!hasRelevantAssets) {
                   estimateHtml = '<p>–£ –≤–∞—Å –Ω–µ—Ç –∞–∫—Ç–∏–≤–æ–≤, –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –¥–ª—è –ø–æ–∫–∞–∑–∞–Ω–Ω—ã—Ö –ø—É–ª–æ–≤.</p>';
              } else if (totalEstimateTon > 0) {
                  // –ï—Å–ª–∏ —É–¥–∞–ª–æ—Å—å –ø–æ—Å—á–∏—Ç–∞—Ç—å –æ–±—â—É—é –æ—Ü–µ–Ω–∫—É –≤ TON (—Ö–æ—Ç—è –±—ã —á–∞—Å—Ç–∏—á–Ω–æ)
                   estimateHtml += `<p><strong>–û–±—â–∞—è –ø—Ä–∏–º–µ—Ä–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –¥–æ—Ö–æ–¥–∞ (–æ—á–µ–Ω—å —É—Å–ª–æ–≤–Ω–æ): ~${totalEstimateTon.toFixed(4)} TON –∑–∞ 15 –¥–Ω–µ–π.</strong></p>`;
              } else if (hasRelevantAssets) {
                   // –ï—Å–ª–∏ –µ—Å—Ç—å –∞–∫—Ç–∏–≤—ã, –Ω–æ –Ω–µ TON, –∏ –Ω–µ—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
                   estimateHtml += `<p class="note">–î–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–π –æ—Ü–µ–Ω–∫–∏ –≤ TON —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –∫—É—Ä—Å–æ–≤ –æ–±–º–µ–Ω–∞.</p>`;
              }


             incomeEstimateDiv.innerHTML = estimateHtml;
        }


        // --- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã ---
        // –í—ã–∑—ã–≤–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∏ –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
        // –ü–æ—Ä—è–¥–æ–∫ –≤–∞–∂–µ–Ω: —Å–Ω–∞—á–∞–ª–∞ –≥—Ä—É–∑–∏–º –¥–∞–Ω–Ω—ã–µ –ø—É–ª–æ–≤ (—Å—Ç–∞—Ç–∏—á–Ω—ã–µ –∏–ª–∏ —Å –±—ç–∫–µ–Ω–¥–∞),
        // –ø–æ—Ç–æ–º –æ–±–Ω–æ–≤–ª—è–µ–º UI, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–∑–æ–≤–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É –±–∞–ª–∞–Ω—Å–æ–≤,
        // –∞ –∑–∞–≥—Ä—É–∑–∫–∞ –±–∞–ª–∞–Ω—Å–æ–≤ –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –≤—ã–∑–æ–≤–µ—Ç —Ä–∞—Å—á–µ—Ç –æ—Ü–µ–Ω–∫–∏, –∫–æ–≥–¥–∞ –±–∞–ª–∞–Ω—Å—ã –±—É–¥—É—Ç –ø–æ–ª—É—á–µ–Ω—ã.
        loadPoolsData(); // –ù–∞—á–∏–Ω–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö –æ –ø—É–ª–∞—Ö —Å—Ä–∞–∑—É
        // updateUI() –≤—ã–∑–æ–≤–µ—Ç—Å—è –ø–æ—Å–ª–µ restoreConnection –∏–ª–∏ –ø–æ –∫–ª–∏–∫—É –Ω–∞ –∫–Ω–æ–ø–∫—É

        // NOTE: loadBalances –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ updateUI –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫–æ—à–µ–ª—å–∫–∞.
        // estimateIncome –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ loadBalances (–∏ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç, —á—Ç–æ loadPoolsData —É–∂–µ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å –∏–ª–∏ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è —Å–∫–æ—Ä–æ).


    </script>
</body>
</html>